<div class="modal-assign-work">
  <div class="modal-header">
    <div class="title">Giao việc</div>
    <div>
      <!-- <button class="btn cancel" (click)="cancelAssign()">Hủy bỏ</button> -->
      <!-- <button class="btn" (click)="showConfirm()">Xác nhận giao việc</button> -->
      <button
        style="text-align: end; width: 98.5%"
        nz-button
        nzType="primary"
        (click)="showModalAddJob()"
      >
        Tạo việc gốc
      </button>
    </div>
  </div>

  <div class="task-group">
    <!-- <div style="text-align: end; width: 98.5%"></div> -->
    <nz-collapse nzGhost>
      <ng-container *ngFor="let task of parentTasks">
        <ng-template #renderHeader>
          <div class="title-collapse">
            <input
              spellcheck="false"
              [(ngModel)]="task.title"
              class="inline-edit-input task-title"
              (click)="$event.stopPropagation()"
              disabled="true"
            />
            <div class="delete-actions">
              <button (click)="showAddJob()" nz-button nzType="primary">
                Tạo việc con
              </button>
            </div>
          </div>
        </ng-template>
        <nz-collapse-panel [nzHeader]="renderHeader">
          <edit-app-misson-item
            [taskIdParent]="task.id"
            (closeEdit)="closeAddJob()"
            *ngIf="isShowAddJob"
          >
          </edit-app-misson-item>
          <ng-container *ngFor="let child of getChildTasks(task.id)">
            <app-misson-item
              [task]="child"
              (removetask)="removeTask($event)"
            ></app-misson-item>
          </ng-container>
        </nz-collapse-panel>
      </ng-container>
    </nz-collapse>
  </div>
  <!-- <div class="modal-bottom">
    <div style="position: relative; flex: 1; margin-right: 10px">
      <textarea placeholder="Viết prompt ở đây..."></textarea>
    </div>
    <div class="upload-file">
      <nz-upload [(nzFileList)]="fileList" [nzBeforeUpload]="beforeUploadFile">
        <button nz-button>
          <nz-icon nzType="upload" />
          Select File
        </button>
      </nz-upload>
    </div>
    <button class="btn">Cải tiến bằng AI</button>
  </div> -->
</div>

<app-modal-add-job
  [listTask]="parentTasks"
  (jobAdded)="handleJobAdded($event)"
></app-modal-add-job>
